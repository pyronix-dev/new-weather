module.exports=[44695,t=>{"use strict";var e=t.i(52296);async function o(t,o){try{var i;let r,s=(r=(i=o).headers.get("x-forwarded-for"))?r.split(",")[0].trim():i.headers.get("x-real-ip")||"unknown",n=o.headers.get("user-agent")||"unknown",a={};if(s&&"unknown"!==s&&"::1"!==s&&"127.0.0.1"!==s)try{let t=await fetch(`http://ip-api.com/json/${s}?fields=status,country,city,isp`,{signal:AbortSignal.timeout(3e3)});if(t.ok){let e=await t.json();"success"===e.status&&(a={country:e.country,city:e.city,isp:e.isp})}}catch(t){console.warn("GeoIP lookup failed:",t)}let l=(0,e.createSupabaseAdmin)();await l.from("login_history").insert({user_id:t,ip_address:s,user_agent:n,location_country:a.country||null,location_city:a.city||null,isp:a.isp||null})}catch(t){console.error("Failed to log user login:",t)}}t.s(["logUserLogin",()=>o])}];

//# sourceMappingURL=design-update_TypeScript_weather10_lib_login-logger_ts_4e1b0d75._.js.map