module.exports=[26084,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.HooksClientContext},5,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},57945,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.AppRouterContext},1212,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored["react-ssr"].ReactServerDOMTurbopackClient},1832,a=>{"use strict";var b=a.i(16552),c=a.i(8284),d=a.i(70230),e=a.i(18988),f=a.i(59389),g=a.i(39700),h=a.i(50958);let i=a=>fetch(a).then(a=>a.json());function j({initialUser:a}){let[j,k]=(0,c.useState)(1),{data:l,isLoading:m,mutate:n}=(0,e.default)(`/api/admin/logs?page=${j}&limit=50`,i),{showToast:o}=(0,g.useToast)(),{confirm:p}=(0,h.useConfirm)();return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,b.jsx)(f.Header,{initialUser:a}),(0,b.jsxs)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/admin",className:"text-slate-500 hover:text-slate-700",children:"â† Retour"}),(0,b.jsx)("h1",{className:"text-2xl font-black text-slate-800",children:"Audit Logs"})]}),(0,b.jsx)("button",{onClick:async()=>{if(await p({title:"Vider l'historique ?",message:"Attention : Cette action est irrÃ©versible. Voulez-vous vraiment supprimer TOUS les logs ?",confirmText:"Tout supprimer",variant:"danger"}))try{let a=await fetch("/api/admin/logs",{method:"DELETE"});if(a.ok)o("Logs supprimÃ©s avec succÃ¨s","success"),n();else{let b=await a.json();o(b.error||"Erreur lors de la suppression","error")}}catch(a){o("Erreur serveur","error")}},className:"px-4 py-2 bg-red-50 text-red-600 text-sm font-bold rounded-lg border border-red-100 hover:bg-red-100 transition-colors",children:"ðŸ—‘ï¸ Vider l'historique"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-slate-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Admin"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Action"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Cible"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"IP"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Date"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-200",children:m?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"Chargement..."})}):l?.logs?.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-slate-800",children:a.users?.email||a.users?.full_name||"Inconnu"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${a.action.includes("delete")?"bg-red-100 text-red-700":a.action.includes("update")?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:a.action})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-slate-600",children:[a.target_type,": ",a.target_id?.slice(0,8),"..."]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-mono text-slate-500",children:a.ip_address||"-"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(a.created_at).toLocaleString("fr-FR")})]},a.id))})]}),l?.pagination&&(0,b.jsxs)("div",{className:"p-4 border-t border-slate-200 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",l.pagination.page," sur ",l.pagination.totalPages]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>k(a=>Math.max(1,a-1)),disabled:1===j,className:"px-3 py-1 border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"PrÃ©cÃ©dent"}),(0,b.jsx)("button",{onClick:()=>k(a=>a+1),disabled:j>=l.pagination.totalPages,className:"px-3 py-1 border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"Suivant"})]})]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bccfb810._.js.map