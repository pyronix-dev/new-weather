module.exports=[26084,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.HooksClientContext},5,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},57945,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.AppRouterContext},1212,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored["react-ssr"].ReactServerDOMTurbopackClient},93807,a=>{"use strict";var b=a.i(16552),c=a.i(63090),d=a.i(8284),e=a.i(70230),f=a.i(59389),g=a.i(80630);let h=()=>(0,b.jsx)("svg",{className:"w-12 h-12 text-emerald-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})}),i=()=>(0,b.jsx)("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),j=()=>(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-emerald-500 rounded-full animate-spin"});function k({initialUser:a}){let k=(0,c.useSearchParams)(),l=(0,c.useRouter)(),m=k.get("plan")||"subscription",n=k.get("session_id"),[o,p]=(0,d.useState)("verifying"),[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)("");(0,d.useEffect)(()=>{n?(async()=>{try{let a=await fetch("/api/checkout/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n})}),b=await a.json();b.success&&b.user?(r(b.user.reference_code),b.user.full_name&&t(b.user.full_name),p("success"),l.refresh()):"pending"===b.status?p("verifying"):(console.error("Verification failed payload:",JSON.stringify(b)),console.error("Verification failed status:",a.status),p("success"))}catch(a){console.error("Verification exception:",a),p("success")}})():p("success")},[n]);let u=m.includes("sms"),v=m.includes("email");return(0,b.jsxs)("div",{className:"min-h-screen bg-stone-100",children:[(0,b.jsx)(f.Header,{initialUser:a}),(0,b.jsx)("main",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-20",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 sm:px-8 py-8 border-b border-slate-100",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:["verifying"===o?(0,b.jsx)(j,{}):(0,b.jsx)(h,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-black text-slate-800 mb-1",children:"verifying"===o?"Vérification...":`MERCI ${s?s.toUpperCase():""}`}),(0,b.jsx)("p",{className:"text-slate-600 font-medium",children:"verifying"===o?"Nous finalisons la création de votre compte...":"Votre paiement a été mis en place avec succès"})]})]})}),"success"===o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"px-6 sm:px-8 py-6 bg-slate-50",children:[(0,b.jsxs)("p",{className:"text-lg font-black text-slate-800 mb-4",children:["Votre numéro de référence est: ",(0,b.jsx)("span",{className:"text-emerald-600",children:q||"Généré par email"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i,{}),(0,b.jsxs)("p",{className:"text-slate-600",children:["Nous vous informerons avant que le premier paiement de ",(0,b.jsx)("span",{className:"font-bold text-slate-800",children:(()=>{switch(m){case"sms-monthly":return"4,99€";case"sms-annual":return"49,90€";case"email-annual":return"10€";default:return""}})()})," ne soit effectué"]})]}),u&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i,{}),(0,b.jsx)("p",{className:"text-slate-600",children:"Veuillez vérifier vos SMS, car un message de confirmation est en cours d'envoi vers votre numéro"})]}),v&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i,{}),(0,b.jsx)("p",{className:"text-slate-600",children:"Veuillez vérifier votre boîte de réception, car un e-mail de confirmation est en cours d'acheminement"})]})]})]}),(0,b.jsxs)("div",{className:"px-6 sm:px-8 py-6 border-t border-slate-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("span",{className:"text-sm font-bold text-slate-500",children:"Votre abonnement"}),(0,b.jsx)("span",{className:"font-black text-slate-800",children:(()=>{switch(m){case"sms-monthly":return"SMS Standard - Mensuel (4,99€/mois)";case"sms-annual":return"SMS Standard - Annuel (49,90€/an)";case"email-annual":return"Alertes Email - Annuel (10€/an)";default:return"Abonnement Alertes"}})()})]}),(0,b.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:(0,b.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,b.jsx)("span",{className:"font-bold",children:"Important :"})," Conservez votre numéro de référence pour gérer votre abonnement ou contacter notre support."]})})]}),(0,b.jsx)("div",{className:"px-6 sm:px-8 py-6 border-t border-slate-100",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsx)(e.default,{href:"/login",className:"flex-1 py-4 bg-slate-800 hover:bg-slate-900 text-white font-black text-center rounded-xl transition-all",children:"Se connecter"}),(0,b.jsx)(e.default,{href:"/alertes",className:"flex-1 py-4 bg-white border-2 border-slate-300 hover:border-slate-400 text-slate-700 font-black text-center rounded-xl transition-all",children:"Gérer mes alertes"})]})})]})]})}),(0,b.jsx)(g.Footer,{})]})}function l({initialUser:a}){return(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-stone-100 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-slate-600 font-medium",children:"Chargement..."})}),children:(0,b.jsx)(k,{initialUser:a})})}a.s(["default",()=>l])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8c9c9abe._.js.map