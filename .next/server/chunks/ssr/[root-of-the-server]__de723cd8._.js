module.exports=[26084,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.HooksClientContext},5,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},57945,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.AppRouterContext},1212,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored["react-ssr"].ReactServerDOMTurbopackClient},47552,a=>{"use strict";var b=a.i(16552),c=a.i(8284),d=a.i(63090),e=a.i(59389),f=a.i(80630);function g({initialUser:a}){let g=(0,d.useSearchParams)(),h=(0,d.useRouter)(),i=g.get("ref"),j=g.get("id"),[k,l]=(0,c.useState)("idle"),[m,n]=(0,c.useState)(""),o=async()=>{l("loading");try{let a=await fetch("/api/subscription/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ref:i,id:j})}),b=await a.json();a.ok?l("success"):(l("error"),n(b.error||"Une erreur est survenue"))}catch(a){l("error"),n("Erreur de connexion")}};return(0,b.jsxs)("div",{className:"min-h-screen bg-stone-50 flex flex-col",children:[(0,b.jsx)(e.Header,{initialUser:a}),(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"bg-white max-w-md w-full rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:(0,b.jsxs)("div",{className:"p-8 text-center",children:["idle"===k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,b.jsx)("h1",{className:"text-2xl font-black text-slate-800 mb-2",children:"Se désinscrire ?"}),(0,b.jsxs)("p",{className:"text-slate-500 mb-8",children:["Vous ne recevrez plus d","'","alertes météo. Cette action est immédiate."]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{onClick:o,className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-colors",children:"Confirmer la désinscription"}),(0,b.jsx)("button",{onClick:()=>h.push("/"),className:"w-full py-3 text-slate-600 font-bold hover:bg-slate-50 rounded-xl transition-colors",children:"Annuler"})]})]}),"loading"===k&&(0,b.jsxs)("div",{className:"py-8",children:[(0,b.jsx)("div",{className:"animate-spin w-10 h-10 border-4 border-slate-200 border-t-slate-800 rounded-full mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-600 font-bold",children:"Traitement en cours..."})]}),"success"===k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-50 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("h1",{className:"text-2xl font-black text-slate-800 mb-2",children:"Désabonné"}),(0,b.jsxs)("p",{className:"text-slate-500 mb-8",children:["Votre abonnement a été annulé avec succès. Vous ne recevrez plus d","'","alertes."]}),(0,b.jsxs)("button",{onClick:()=>h.push("/"),className:"w-full py-3 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-900 transition-colors",children:["Retour à l","'","accueil"]})]}),"error"===k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,b.jsx)("h1",{className:"text-xl font-black text-slate-800 mb-2",children:"Erreur"}),(0,b.jsx)("p",{className:"text-slate-500 mb-8",children:m}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{onClick:o,className:"w-full py-3 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-900 transition-colors",children:"Réessayer"}),(0,b.jsx)("button",{onClick:()=>h.push("/"),className:"w-full py-3 text-slate-600 font-bold hover:bg-slate-50 rounded-xl transition-colors",children:"Retour"})]})]})]})})}),(0,b.jsx)(f.Footer,{})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__de723cd8._.js.map