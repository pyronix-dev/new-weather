module.exports=[26084,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.HooksClientContext},5,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},57945,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored.contexts.AppRouterContext},1212,(a,b,c)=>{"use strict";b.exports=a.r(16511).vendored["react-ssr"].ReactServerDOMTurbopackClient},71556,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},49216,(a,b,c)=>{"use strict";var d=a.r(71556);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},87361,(a,b,c)=>{b.exports=a.r(49216)()},18451,a=>{"use strict";var b=a.i(16552),c=a.i(8284),d=a.i(70230),e=a.i(63090),f=a.i(59389),g=a.i(80630),h=a.i(26411);let i=({className:a})=>(0,b.jsx)("svg",{className:a||"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})});function j({initialUser:a}){let j=(0,e.useRouter)(),[k,l]=(0,c.useState)("register"),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({email:"",phone:"",password:"",firstName:"",lastName:""}),[u,v]=(0,c.useState)({length:!1,number:!1,special:!1});(0,c.useEffect)(()=>{let a=s.password;v({length:a.length>=8,number:/\d/.test(a),special:/[@$!%*?&]/.test(a)})},[s.password]);let w=Object.values(u).every(Boolean),x=a=>!!q&&"phone"!==a&&("password"===a?!w:!s[a]),y=async a=>{if((a.preventDefault(),r(!0),s.firstName&&s.lastName&&s.email&&s.password)&&w){p(!0);try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),b=await a.json();b.success?l("otp"):alert(b.error||"Une erreur est survenue")}catch(a){console.error(a),alert("Erreur de connexion")}finally{p(!1)}}},z=async a=>{a.preventDefault(),p(!0);try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify-code",code:m})}),b=await a.json();b.success?j.push("/dashboard"):alert(b.error||"Code invalide")}catch(a){alert("Erreur de connexion")}finally{p(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans",children:[(0,b.jsx)(f.Header,{initialUser:a}),(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center px-4 py-12 sm:py-16",children:(0,b.jsxs)("div",{className:"w-full max-w-lg",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-black text-slate-800 mb-2",children:"register"===k?"Créer un compte":"Vérification"}),(0,b.jsx)("p",{className:"text-slate-500 font-medium",children:"register"===k?"Rejoignez la communauté Météo Martinique pour partager vos observations.":"Entrez le code reçu par email pour valider votre compte."})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl shadow-slate-200/60 border border-slate-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-6 sm:p-8",children:"register"===k?(0,b.jsxs)("form",{onSubmit:y,className:"space-y-4",noValidate:!0,children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs font-bold text-slate-700 uppercase",children:["Prénom",(0,b.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:s.firstName,onChange:a=>t({...s,firstName:a.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl focus:outline-none focus:ring-2 font-medium transition-colors
                                                    ${x("firstName")?"border-red-500 focus:ring-red-200 bg-red-50":"border-slate-200 focus:ring-slate-200"}`})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs font-bold text-slate-700 uppercase",children:["Nom",(0,b.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:s.lastName,onChange:a=>t({...s,lastName:a.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl focus:outline-none focus:ring-2 font-medium transition-colors
                                                    ${x("lastName")?"border-red-500 focus:ring-red-200 bg-red-50":"border-slate-200 focus:ring-slate-200"}`})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs font-bold text-slate-700 uppercase",children:["Email",(0,b.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,b.jsx)("input",{type:"email",value:s.email,onChange:a=>t({...s,email:a.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl focus:outline-none focus:ring-2 font-medium transition-colors
                                                ${x("email")?"border-red-500 focus:ring-red-200 bg-red-50":"border-slate-200 focus:ring-slate-200"}`,suppressHydrationWarning:!0})]}),(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-700 uppercase",children:"Téléphone (Optionnel)"}),(0,b.jsx)(h.UserPhoneInput,{value:s.phone,onChange:a=>t({...s,phone:a})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("label",{className:"text-xs font-bold text-slate-700 uppercase",children:["Mot de passe",(0,b.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,b.jsx)("input",{type:"password",value:s.password,onChange:a=>t({...s,password:a.target.value}),className:`w-full px-4 py-3 bg-slate-50 border rounded-xl focus:outline-none focus:ring-2 font-medium transition-colors
                                                    ${x("password")?"border-red-500 focus:ring-red-200 bg-red-50":"border-slate-200 focus:ring-slate-200"}`})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2 bg-slate-50 p-3 rounded-xl",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 text-xs font-medium transition-all duration-300 ${u.length?"text-emerald-600":"text-slate-400"}`,children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full flex items-center justify-center transition-all duration-300 ${u.length?"bg-emerald-100":"bg-slate-200"}`,children:u.length&&(0,b.jsx)(i,{})}),"Au moins 8 caractères"]}),(0,b.jsxs)("div",{className:`flex items-center gap-2 text-xs font-medium transition-all duration-300 ${u.number?"text-emerald-600":"text-slate-400"}`,children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full flex items-center justify-center transition-all duration-300 ${u.number?"bg-emerald-100":"bg-slate-200"}`,children:u.number&&(0,b.jsx)(i,{})}),"Au moins 1 chiffre"]}),(0,b.jsxs)("div",{className:`flex items-center gap-2 text-xs font-medium transition-all duration-300 ${u.special?"text-emerald-600":"text-slate-400"}`,children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full flex items-center justify-center transition-all duration-300 ${u.special?"bg-emerald-100":"bg-slate-200"}`,children:u.special&&(0,b.jsx)(i,{})}),"Au moins 1 caractère spécial (@$!%*?&)"]})]})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsx)("button",{type:"submit",disabled:o,className:"w-full py-4 bg-slate-900 hover:bg-black text-white font-bold text-lg rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Création du compte..."})]}):"Créer mon compte"})})]}):(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-700 uppercase text-center block",children:"Code de vérification"}),(0,b.jsx)("input",{required:!0,type:"text",maxLength:6,value:m,onChange:a=>n(a.target.value),className:"w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-200 font-mono text-center text-2xl tracking-[0.5em] font-bold",placeholder:"••••••"}),(0,b.jsxs)("p",{className:"text-center text-sm text-slate-500",children:["Envoyé à ",s.email||s.phone]})]}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg rounded-xl transition-all shadow-lg active:scale-[0.98] disabled:opacity-70",children:o?"Vérification...":"Vérifier et Accéder"})]})}),"register"===k&&(0,b.jsx)("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-100 text-center",children:(0,b.jsxs)("p",{className:"text-slate-600 text-sm",children:["Déjà un compte ?"," ",(0,b.jsx)(d.default,{href:"/login",className:"font-bold text-slate-900 hover:underline",children:"Se connecter"})]})})]})]})}),(0,b.jsx)(g.Footer,{})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__76b78d86._.js.map