(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89168,(e,t,s)=>{},80615,(e,t,s)=>{var r=e.i(21524);e.r(89168);var l=e.r(35267),a=l&&"object"==typeof l&&"default"in l?l:{default:l},i=void 0!==r.default&&r.default.env&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,l=t.optimizeForSpeed,a=void 0===l?i:l;d(n(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",d("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(d(n(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];d(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&d(n(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var l=document.head||document.getElementsByTagName("head")[0];return s?l.insertBefore(r,s):l.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},u={};function m(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return u[r]||(u[r]="jsx-"+c(e+"-"+s)),u[r]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return u[s]||(u[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[s]}var x=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,r=void 0===s?null:s,l=t.optimizeForSpeed,a=void 0!==l&&l;this._sheet=r||new o({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),r&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),r=s.styleId,l=s.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var a=l.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=a,this._instancesCounts[r]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var r=this._fromServer&&this._fromServer[s];r?(r.parentNode.removeChild(r),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],r=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,r=e.id;if(s){var l=m(r,s);return{styleId:l,rules:Array.isArray(t)?t.map(function(e){return h(l,e)}):[h(l,t)]}}return{styleId:m(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=l.createContext(null);function p(){return new x}function b(){return l.useContext(f)}f.displayName="StyleSheetContext";var g=a.default.useInsertionEffect||a.default.useLayoutEffect,j="undefined"!=typeof window?p():void 0;function v(e){var t=j||b();return t&&("undefined"==typeof window?t.add(e):g(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,r=l.useContext(f),i=l.useState(function(){return r||t||p()})[0];return a.default.createElement(f.Provider,{value:i},s)},s.createStyleRegistry=p,s.style=v,s.useStyleRegistry=b},75856,(e,t,s)=>{t.exports=e.r(80615).style},77786,e=>{"use strict";var t=e.i(50415),s=e.i(75856),r=e.i(31588);let l=()=>(0,t.jsx)("i",{className:"bi bi-facebook text-lg"}),a=()=>(0,t.jsx)("i",{className:"bi bi-instagram text-lg"}),i=()=>(0,t.jsx)("i",{className:"bi bi-twitter-x text-lg"});function n(){return(0,t.jsxs)("footer",{className:"jsx-21be1207c161d05d relative mt-auto bg-white border-t border-slate-200",children:[(0,t.jsx)("div",{className:"jsx-21be1207c161d05d py-12 sm:py-16",children:(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 mb-12",children:[(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d lg:col-span-5 order-1",children:[(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d flex items-center gap-3 mb-6",children:[(0,t.jsx)("img",{src:"https://raw.githubusercontent.com/pyronix-dev/upwork/main/logo.png",alt:"Logo",className:"jsx-21be1207c161d05d w-12 h-12 object-contain"}),(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d",children:[(0,t.jsx)("h4",{className:"jsx-21be1207c161d05d text-xl font-bold text-slate-800",children:"MÃ©tÃ©o"}),(0,t.jsx)("p",{className:"jsx-21be1207c161d05d text-sm font-semibold text-slate-600",children:"Martinique"})]})]}),(0,t.jsx)("p",{className:"jsx-21be1207c161d05d text-slate-500 font-medium leading-relaxed mb-6 text-lg max-w-sm",children:"Votre source fiable pour des prÃ©visions mÃ©tÃ©o prÃ©cises en Martinique. DonnÃ©es actualisÃ©es en temps rÃ©el."}),(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d flex gap-3",children:[(0,t.jsx)("a",{href:"#","aria-label":"Facebook",className:"jsx-21be1207c161d05d w-10 h-10 rounded-xl bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-all duration-300",children:(0,t.jsx)(l,{})}),(0,t.jsx)("a",{href:"#","aria-label":"Twitter",className:"jsx-21be1207c161d05d w-10 h-10 rounded-xl bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-all duration-300",children:(0,t.jsx)(i,{})}),(0,t.jsx)("a",{href:"#","aria-label":"Instagram",className:"jsx-21be1207c161d05d w-10 h-10 rounded-xl bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-800 hover:text-white hover:border-slate-800 transition-all duration-300",children:(0,t.jsx)(a,{})})]})]}),(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d lg:col-span-2 order-2",children:[(0,t.jsx)("h4",{className:"jsx-21be1207c161d05d text-base sm:text-lg font-bold text-slate-800 mb-4 sm:mb-6",children:"Liens Rapides"}),(0,t.jsx)("ul",{className:"jsx-21be1207c161d05d space-y-2 sm:space-y-3",children:[{label:"PrÃ©visions",href:"/previsions"},{label:"Carte",href:"/carte"},{label:"Alertes",href:"/alertes"},{label:"Vigilance",href:"/vigilance"}].map((e,s)=>(0,t.jsx)("li",{className:"jsx-21be1207c161d05d",children:(0,t.jsx)(r.default,{href:e.href,className:"text-slate-500 font-medium hover:text-slate-800 transition-colors duration-300 text-sm",children:e.label})},s))})]}),(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d lg:col-span-2 order-3",children:[(0,t.jsx)("h4",{className:"jsx-21be1207c161d05d text-base sm:text-lg font-bold text-slate-800 mb-4 sm:mb-6",children:"Services"}),(0,t.jsx)("ul",{className:"jsx-21be1207c161d05d space-y-2 sm:space-y-3",children:[{label:"MÃ©tÃ©o des plages",href:"/cartes/plages"},{label:"MÃ©tÃ©o marine",href:"/meteo-marine"},{label:"Vigilance ouragans",href:"/vigilance"},{label:"Alertes SMS",href:"/alertes?mode=sms"}].map((e,s)=>(0,t.jsx)("li",{className:"jsx-21be1207c161d05d",children:(0,t.jsx)(r.default,{href:e.href,className:"text-slate-500 font-medium hover:text-slate-800 transition-colors duration-300 text-sm",children:e.label})},s))})]})]}),(0,t.jsx)("div",{className:"jsx-21be1207c161d05d pt-8 border-t border-slate-200",children:(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d text-center md:text-left",children:[(0,t.jsxs)("p",{className:"jsx-21be1207c161d05d text-slate-500 font-medium text-sm",children:["Â© 2026 ",(0,t.jsx)("span",{className:"jsx-21be1207c161d05d text-slate-800 font-bold",children:"MÃ©tÃ©o Martinique"}),". Tous droits rÃ©servÃ©s."]}),(0,t.jsxs)("p",{className:"jsx-21be1207c161d05d text-slate-500 text-sm mt-2 flex items-center justify-center md:justify-start gap-1.5 font-medium tracking-wide",children:[(0,t.jsx)("span",{className:"jsx-21be1207c161d05d bg-gradient-to-r from-slate-600 to-slate-800 bg-clip-text text-transparent",children:"Fait et gÃ©rÃ© avec"}),(0,t.jsx)("span",{style:{animation:"heartbeat 1.5s ease-in-out infinite"},className:"jsx-21be1207c161d05d inline-block text-red-500 text-base",children:"â¤ï¸"}),(0,t.jsx)("span",{className:"jsx-21be1207c161d05d bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"par une Ã©quipe martiniquaise"})]})]}),(0,t.jsxs)("div",{className:"jsx-21be1207c161d05d flex flex-wrap justify-center gap-6",children:[(0,t.jsx)(r.default,{href:"/contact",className:"text-slate-500 font-medium text-sm hover:text-slate-800 transition-colors duration-300",children:"Contact"}),(0,t.jsx)(r.default,{href:"/mentions-legales",className:"text-slate-500 font-medium text-sm hover:text-slate-800 transition-colors duration-300",children:"Mentions lÃ©gales"}),(0,t.jsx)(r.default,{href:"/confidentialite",className:"text-slate-500 font-medium text-sm hover:text-slate-800 transition-colors duration-300",children:"Politique de confidentialitÃ©"}),(0,t.jsx)(r.default,{href:"/conditions-generales",className:"text-slate-500 font-medium text-sm hover:text-slate-800 transition-colors duration-300",children:"CGU"})]})]})})]})}),(0,t.jsx)(s.default,{id:"21be1207c161d05d",children:"@keyframes heartbeat{0%,to{transform:scale(1)}14%{transform:scale(1.15)}28%{transform:scale(1)}42%{transform:scale(1.15)}56%,to{transform:scale(1)}}"})]})}e.s(["Footer",()=>n])},87129,e=>{"use strict";var t=e.i(35267);let s=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...r,width:l,height:l,stroke:e,strokeWidth:i?24*Number(a)/Number(l):a,className:s("lucide",n),...c},[...d.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(o)?o:[o]])),a=(e,r)=>{let a=(0,t.forwardRef)(({className:a,...i},n)=>(0,t.createElement)(l,{ref:n,iconNode:r,className:s(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...i}));return a.displayName=`${e}`,a};e.s(["default",()=>a],87129)},51992,e=>{"use strict";var t=e.i(50415),s=e.i(35267),r=e.i(57357),l=e.i(31588),a=e.i(81696),i=e.i(77786),n=e.i(53696),o=e.i(92233);let d=()=>(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});function c({isOpen:e,onClose:l,user:a}){let i=(0,r.useRouter)(),{showToast:c}=(0,n.useToast)(),[u,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)({full_name:a?.full_name||"",email:a?.email||"",phone:a?.phone||""}),f=async e=>{e.preventDefault(),m(!0);try{if(!(await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw Error("Failed to update");i.refresh(),l(),c("Profil mis Ã  jour avec succÃ¨s !","success")}catch(e){c("Erreur lors de la mise Ã  jour.","error")}finally{m(!1)}};return(0,t.jsx)(o.Root,{open:e,onOpenChange:l,children:(0,t.jsxs)(o.Portal,{children:[(0,t.jsx)(o.Overlay,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 animate-fade-in"}),(0,t.jsxs)(o.Content,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 z-50 animate-scale-in focus:outline-none",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)(o.Title,{className:"text-xl font-black text-slate-800",children:"Modifier mon profil"}),(0,t.jsx)(o.Close,{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors",children:(0,t.jsx)(d,{})})]}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Nom complet"}),(0,t.jsx)("input",{type:"text",value:h.full_name,onChange:e=>x({...h,full_name:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-800 focus:border-transparent transition-all",placeholder:"Jean Dupont"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:h.email,onChange:e=>x({...h,email:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-800 focus:border-transparent transition-all",placeholder:"jean@exemple.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"TÃ©lÃ©phone"}),(0,t.jsx)("input",{type:"tel",value:h.phone,onChange:e=>x({...h,phone:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-800 focus:border-transparent transition-all",placeholder:"+596 696 XX XX XX"})]}),(0,t.jsxs)("div",{className:"pt-4 flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"flex-1 py-3 font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-xl transition-colors",children:"Annuler"}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"flex-1 py-3 font-bold text-white bg-slate-800 hover:bg-slate-900 rounded-xl transition-colors disabled:opacity-50",children:u?"Enregistrement...":"Enregistrer"})]})]})]})]})})}var u=e.i(87129);let m=(0,u.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=(0,u.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),x=(0,u.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),f=(0,u.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),p=(0,u.default)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),b=(0,u.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=(0,u.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function j({initialUser:e}){let{showToast:o}=(0,n.useToast)(),[d,u]=(0,s.useState)(e?{reference:e.reference||e.name,full_name:e.name,email:e.email,phone:e.phone||null,notifications_enabled:e.notifications_enabled??!0,role:e.role,subscription:e.subscription}:null),[j,v]=(0,s.useState)(!e),[y,N]=(0,s.useState)(!!e&&!e.subscription),[w,_]=(0,s.useState)(!0),[S,k]=(0,s.useState)(!1),C=(0,r.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/auth/me");if(!t.ok){e||C.push("/login");return}let s=await t.json();u(e=>e?{...e,...s,subscription:s.subscription||e.subscription}:s)}catch(e){console.error("Failed to fetch user data:",e)}finally{v(!1),N(!1),_(!1)}})()},[C]);let R=async()=>{await fetch("/api/auth/logout",{method:"POST"}),C.push("/login")};if(j)return(0,t.jsx)("div",{className:"min-h-screen bg-stone-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-slate-600 font-medium",children:"Chargement..."})});if(!d)return null;let z="Utilisateur";d.full_name?z=d.full_name.split(" ")[0]:d.email&&(z=d.email.split("@")[0]);let F={name:z,email:d.email||"",role:d.role},A=d.email||d.phone||"Non dÃ©fini",T="Email",E=!1;d.subscription?d.subscription.plan.toLowerCase().includes("sms")?(A=d.phone||A,T="NumÃ©ro vÃ©rifiÃ©",E=!0):d.subscription.plan.toLowerCase().includes("email")&&(A=d.email||A,T="Email"):d.email?(A=d.email,T="Email"):d.phone&&(A=d.phone,T="TÃ©lÃ©phone");let M=new URLSearchParams;return d.email&&M.set("email",d.email),d.phone&&M.set("phone",d.phone),d.reference&&M.set("ref",d.reference),(0,t.jsxs)("div",{className:"min-h-screen bg-stone-100",children:[(0,t.jsx)(a.Header,{initialUser:F}),(0,t.jsxs)("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-black text-slate-800 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Bonjour,"}),w&&(!d.full_name||d.email&&d.full_name===d.email.split("@")[0])?(0,t.jsx)("div",{className:"h-8 w-32 bg-slate-200 rounded-lg animate-pulse"}):(0,t.jsxs)("span",{children:[z," ðŸ‘‹"]})]}),(0,t.jsx)("p",{className:"text-slate-500 font-medium",children:"GÃ©rez votre abonnement et vos alertes"})]}),(0,t.jsxs)("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 font-bold rounded-xl transition-colors text-sm w-fit shadow-sm",children:[(0,t.jsx)(f,{className:"w-5 h-5"}),"Se dÃ©connecter"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:d.subscription?(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,t.jsxs)("h2",{className:"font-black text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(p,{className:"w-6 h-6 text-emerald-500"}),"Abonnement Actif"]}),(0,t.jsx)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full uppercase tracking-wide",children:d.subscription.status})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-1",children:d.subscription.plan}),(0,t.jsxs)("p",{className:"text-slate-500 text-sm",children:["Renouvellement le ",d.subscription.nextBilling]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"block text-2xl font-black text-slate-800",children:d.subscription.price}),(0,t.jsx)("span",{className:"text-xs text-slate-500 font-medium",children:d.subscription.plan.includes("Mensuel")?"/ mois":"/ an"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-6 border-t border-slate-100",children:[(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,t.jsx)("p",{className:"text-xs text-slate-500 font-bold uppercase mb-1",children:"RÃ©fÃ©rence"}),(0,t.jsx)("p",{className:"font-mono font-bold text-slate-700 text-lg",children:d.reference})]}),(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,t.jsx)("p",{className:"text-xs text-slate-500 font-bold uppercase mb-1",children:T}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[A,E&&(0,t.jsx)(g,{className:"w-4 h-4 text-emerald-500"})]})]})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex gap-4",children:[(0,t.jsx)(l.default,{href:`/alertes?${M.toString()}`,className:"text-sm font-bold text-slate-600 hover:text-slate-900 transition-colors",children:"Changer de plan"}),(0,t.jsx)(l.default,{href:"/dashboard/cancel",className:"text-sm font-bold text-red-600 hover:text-red-700 transition-colors ml-auto",children:"Annuler l'abonnement"})]})]}):j||y?(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-pulse",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-slate-200 rounded-full"}),(0,t.jsx)("div",{className:"h-6 bg-slate-200 rounded w-40"})]}),(0,t.jsx)("div",{className:"h-6 bg-slate-200 rounded-full w-20"})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-8 bg-slate-200 rounded w-48"}),(0,t.jsx)("div",{className:"h-4 bg-slate-200 rounded w-32"})]}),(0,t.jsxs)("div",{className:"text-right space-y-2",children:[(0,t.jsx)("div",{className:"h-8 bg-slate-200 rounded w-24 ml-auto"}),(0,t.jsx)("div",{className:"h-3 bg-slate-200 rounded w-10 ml-auto"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-6 border-t border-slate-100",children:[(0,t.jsx)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 h-24"}),(0,t.jsx)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100 h-24"})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-slate-50/50 border-t border-slate-100 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-5 bg-slate-200 rounded w-32"}),(0,t.jsx)("div",{className:"h-5 bg-slate-200 rounded w-40"})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 text-center",children:[(0,t.jsx)("h2",{className:"font-black text-slate-800 text-xl mb-2",children:"Aucun abonnement actif"}),(0,t.jsx)("p",{className:"text-slate-500 mb-6",children:"Souscrivez Ã  nos alertes mÃ©tÃ©o pour rester informÃ©"}),(0,t.jsx)("a",{href:"/alertes",className:"inline-block px-6 py-3 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-900 transition-colors",children:"Voir les offres"})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[("admin"===d.role||"super_admin"===d.role)&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 rounded-2xl shadow-lg p-6 text-white overflow-hidden relative group",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:(0,t.jsx)("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"})})}),(0,t.jsx)("h3",{className:"font-black text-xl mb-2 relative z-10",children:"Espace Admin"}),(0,t.jsx)("p",{className:"text-indigo-100 text-sm mb-4 relative z-10",children:"GÃ©rez les utilisateurs, modÃ©rez les observations et consultez les statistiques."}),(0,t.jsx)(l.default,{href:"/admin",className:"block w-full text-center py-2.5 bg-white text-indigo-600 font-bold rounded-xl hover:bg-indigo-50 transition-colors shadow-sm relative z-10",children:"AccÃ©der au Dashboard"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl flex items-center justify-center text-white font-black text-xl shadow-md",children:z.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800",children:d.reference}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:A})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>k(!0),className:"w-full flex items-center gap-3 px-4 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl transition-colors text-sm font-medium group",children:[(0,t.jsx)(m,{className:"w-5 h-5"}),"Modifier mon profil"]}),(0,t.jsxs)(l.default,{href:"/dashboard/settings",className:"w-full flex items-center gap-3 px-4 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl transition-colors text-sm font-medium group",children:[(0,t.jsx)(b,{className:"w-5 h-5"}),"ParamÃ¨tres"]}),(d.subscription||y)&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-slate-700 text-sm font-medium",children:[(0,t.jsx)(x,{className:"w-5 h-5"}),"Notifications"]}),(0,t.jsx)("button",{onClick:async()=>{let e=!d.notifications_enabled;u(t=>t?{...t,notifications_enabled:e}:null);try{if(!(await fetch("/api/user/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:e})})).ok)throw Error("Failed");let t=await fetch("/api/auth/me");if(t.ok){let e=await t.json();u(e)}}catch(t){u(t=>t?{...t,notifications_enabled:!e}:null),o("Erreur lors de la mise Ã  jour","error")}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 ${d.notifications_enabled?"bg-emerald-500":"bg-slate-200"}`,children:(0,t.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.notifications_enabled?"translate-x-6":"translate-x-1"}`})})]}),(0,t.jsxs)(l.default,{href:"/contact",className:"w-full flex items-center gap-3 px-4 py-3 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-xl transition-colors text-sm font-medium group",children:[(0,t.jsx)(h,{className:"w-5 h-5"}),"Support client"]})]})]})]})]})]}),(0,t.jsx)(i.Footer,{}),d&&(0,t.jsx)(c,{isOpen:S,onClose:()=>k(!1),user:d})]})}e.s(["DashboardClient",()=>j],51992)}]);